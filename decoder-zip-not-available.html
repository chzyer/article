<html>
<head>
<meta charset='utf-8'>
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
<link rel="alternate" type="application/rss+xml" href="/feed.xml" />
<link rel="stylesheet" href="/static/article.css" />
<title>decoder zip not available</title>
<style>

</style>
</head>

<body>
<article>
	<div style="font-size:10pt;position:absolute;"><a href="/" style="color:#585858">chenye.org</a></div>
	<h1 class="title">decoder zip not available</h1>
	<div class="date">December 01, 2011</div>
	<hr />
	<p>这个问题困扰了我近1个月(当然中途对继续编码没多大影响就没去理他)<br>
环境:<code>python in ubuntu server</code><br>
PIL是python下一个图片处理工具.可以随意对图片进行尺寸伸缩,加水印等操作.<br>
但是默认PIL是没有安装jpeg和png的库的,需要单独安装.<br>
由于是64位系统,系统用apt-get安装的文件会和32位系统不同,导致PIL安装的时候找不到这两个库  </p>

<ul>
<li><a href="http://www.foxhop.net/ubuntu-python-easy_install-pil-does-not-install-zlib-support">帮助一</a></li>
<li><a href="http://pkarl.com/articles/freetype-jpeg-zlib-and-python-imaging-library-osx-/">帮助二</a></li>
</ul><p>这两个网址基本能解决上述问题.
装完之后Jpeg一直正常,png就一直不正常.
但是检测的时候是提示都正常的!
后来在<a href="http://old.nabble.com/IOError%3A-decoder-zip-not-available-td30617803.html">这里</a>上发现一个和我情况完全一模一样的情况(-.-)
万能的评论帮助了我</p>

<pre><code>The setup output looks fine, so my guess is that your script isn't
picking up the same build as the one you get when you run the test
script. Running the following command in your PIL build directory and
your script directory will tell you what files Python are using:
</code></pre>

<pre><code>python -c "import _imaging; print _imaging.__file__"
</code></pre>

<p>上面的鸟文看不懂?没事,执行最下面的一行就行了.
得到路径...</p>

<pre><code>/usr/local/lib/python2.7/dist-packages/PIL-1.1.7-py2.7-linux-x86_64.egg/_imaging.so
</code></pre>

<p>貌似真正的路径在</p>

<pre><code>/usr/local/lib/python2.7/dist-packages/PIL/_imaging.so
</code></pre>

<p>这下就知道了...</p>

<pre><code>sudo nano /usr/local/lib/python2.7/dist-packages/pil.pth
</code></pre>

<p>修改Image类的位置,在另起一行加上<code>PIL-1.1.7-py2.7-linux-x86_64.egg</code>, 这下就OK了.</p>
</article>
<script>
var ua = window.navigator.userAgent
var isMobile = ua.indexOf("Android") > 0 || ua.indexOf("iPhone") > 0)
if ! isMobile {
	document.write('<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></' + 'script>')
	window.onload = function() {
		
	}
}
</script>
</body>

</html>
